<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Source Themes Academic 4.8.0"><meta name=description content="This block contains information about when and how to dump output files. See EPOCH input deck for more information on the input deck.
Basics Output in EPOCH is handled using the custom designed SDF file format (Self Describing Format)."><link rel=alternate hreflang=en-us href=/documentation/input_deck/input_deck_output_block.html><meta name=theme-color content="#3f51b5"><script src=/js/mathjax-config.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css crossorigin=anonymous title=hl-light><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark disabled><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin=anonymous async></script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js integrity crossorigin=anonymous async></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap"><link rel=stylesheet href=/css/academic.css><link rel=manifest href=/index.webmanifest><link rel=icon type=image/png href=/images/icon_hucf2a1ead28adac6bbe3177e5d4e4a1f0_753_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=/images/icon_hucf2a1ead28adac6bbe3177e5d4e4a1f0_753_192x192_fill_lanczos_center_2.png><link rel=canonical href=/documentation/input_deck/input_deck_output_block.html><meta property="twitter:card" content="summary"><meta property="og:site_name" content="EPOCH"><meta property="og:url" content="/documentation/input_deck/input_deck_output_block.html"><meta property="og:title" content="output block | EPOCH"><meta property="og:description" content="This block contains information about when and how to dump output files. See EPOCH input deck for more information on the input deck.
Basics Output in EPOCH is handled using the custom designed SDF file format (Self Describing Format)."><meta property="og:image" content="/images/logo_hub4b4d6a0f57638acebb5550a80c8c030_9243_300x300_fit_lanczos_2.png"><meta property="twitter:image" content="/images/logo_hub4b4d6a0f57638acebb5550a80c8c030_9243_300x300_fit_lanczos_2.png"><meta property="og:locale" content="en-us"><meta property="article:modified_time" content="2021-06-23T01:08:07+01:00"><title>output block | EPOCH</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents><aside class=search-results id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/><img src=/images/logo_hub4b4d6a0f57638acebb5550a80c8c030_9243_0x70_resize_lanczos_2.png alt=EPOCH></a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/><img src=/images/logo_hub4b4d6a0f57638acebb5550a80c8c030_9243_0x70_resize_lanczos_2.png alt=EPOCH></a></div><div class="navbar-collapse main-menu-item collapse justify-content-end" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/#about><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/quickstart.html><span>Quick Start</span></a></li><li class=nav-item><a class=nav-link href=/documentation.html><span>Documentation</span></a></li><li class=nav-item><a class=nav-link href=/publication.html><span>Publications</span></a></li><li class=nav-item><a class=nav-link href=/license.html><span>License</span></a></li><li class=nav-item><a class=nav-link href=/contact.html><span>Contact</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=#><i class="fas fa-search" aria-hidden=true></i></a></li></ul></div></nav><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 docs-sidebar"><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-3" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation">
<span><i class="fas fa-bars"></i></span></button>
<input name=q type=search class=form-control placeholder=Search... autocomplete=off></form><nav class="collapse docs-links" id=docs-nav><div class=docs-toc-item><a class=docs-toc-link href=/documentation.html>Overview</a></div><div class=docs-toc-item><a class=docs-toc-link href=/documentation/basic_usage.html>Basic usage</a><ul class="nav docs-sidenav"><li><a href=/documentation/basic_usage/faq.html>FAQs</a></li><li><a href=/documentation/basic_usage/structure.html>Structure</a></li><li><a href=/documentation/basic_usage/compiling.html>Compiling</a></li><li><a href=/documentation/basic_usage/compiler_flags.html>Compiler Flags</a></li><li><a href=/documentation/basic_usage/running.html>Running</a></li><li><a href=/documentation/basic_usage/acknowledging_epoch.html>Acknowledging EPOCH</a></li><li><a href=/documentation/basic_usage/libraries.html>Libraries</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=/documentation/input_deck/input_deck.html>Input deck</a><ul class="nav docs-sidenav"><li><a href=/documentation/input_deck/input_deck_control.html>control block</a></li><li><a href=/documentation/input_deck/input_deck_boundaries.html>boundaries block</a></li><li><a href=/documentation/input_deck/input_deck_species.html>species block</a></li><li><a href=/documentation/input_deck/input_deck_laser.html>laser block</a></li><li><a href=/documentation/input_deck/input_deck_fields.html>fields block</a></li><li><a href=/documentation/input_deck/input_deck_window.html>window block</a></li><li class=active><a href=/documentation/input_deck/input_deck_output_block.html>output block</a></li><li><a href=/documentation/input_deck/input_deck_output_global.html>output_global block</a></li><li><a href=/documentation/input_deck/input_deck_dist_fn.html>dist_fn block</a></li><li><a href=/documentation/input_deck/input_deck_probe.html>probe block</a></li><li><a href=/documentation/input_deck/input_deck_collisions.html>collisions block</a></li><li><a href=/documentation/input_deck/input_deck_qed.html>qed block</a></li><li><a href=/documentation/input_deck/input_deck_subset.html>subset block</a></li><li><a href=/documentation/input_deck/input_deck_constant.html>constant block</a></li><li><a href=/documentation/input_deck/input_deck_injector.html>injector block</a></li><li><a href=/documentation/input_deck/input_deck_antenna.html>Input deck antenna</a></li><li><a href=/documentation/input_deck/input_deck_particle_file.html>Input deck particle file</a></li><li><a href=/documentation/input_deck/binary_files.html>Binary files</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=/documentation/code_details.html>Code details</a><ul class="nav docs-sidenav"><li><a href=/documentation/code_details/maths_parser.html>Maths parser</a></li><li><a href=/documentation/code_details/using_epoch_in_practice.html>Using EPOCH in practice</a></li><li><a href=/documentation/code_details/using_delta_f.html>Using delta f</a></li><li><a href=/documentation/code_details/previous_versions.html>Previous versions</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=/documentation/visualising_output.html>Visualising output</a><ul class="nav docs-sidenav"><li><a href=/documentation/visualising_output/visualising_sdf_files_with_idl_or_gdl.html>IDL or GDL</a></li><li><a href=/documentation/visualising_output/visualising_sdf_files_with_llnl_visit.html>LLNL VisIt</a></li><li><a href=/documentation/visualising_output/python.html>Python</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=/documentation/examples.html>Examples</a><ul class="nav docs-sidenav"><li><a href=/documentation/examples/basic_examples.html>Basic examples</a></li><li><a href=/documentation/examples/workshop_examples.html>Workshop examples</a></li><li><a href=/documentation/examples/workshop_examples_continued.html>Workshop examples continued</a></li></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>Contents</a></li></ul><nav id=TableOfContents></nav></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role=main><article class=article><div class=docs-article-container><h1>output block</h1><div class=article-style><p>This block contains information about when and how to dump output files.
See
<a href=/documentation/input_deck/input_deck>EPOCH input deck</a> for more information
on the input deck.</p><h1 id=basics>Basics</h1><p>Output in EPOCH is handled using the custom designed SDF file format
(<em>Self Describing Format</em>). A detailed specification of this format is
available elsewhere, although this is only of interest to developers
wishing to write new libraries. EPOCH comes with readers for ITT IDL,
LLNL VisIt, Mathworks MatLab and Python. The IDL reader is also
compatible with the open source GDL tool.</p><p>There are two styles of output block supported by EPOCH. The first
style, which will be referred to as the &ldquo;traditional&rdquo; style, is the
method that has been supported by EPOCH since its inception. With this
method, a single output block governs all the output dumps which are to
be performed. There are a few levels of output which give some small
amount of flexibility over what gets dumped but these do not allow for a
very fine-grained control.</p><p>In version 4.0 of EPOCH, a new style was introduced in which multiple
named output blocks may be specified allowing for much greater
flexibility. The existence of a &ldquo;name&rdquo; parameter is what determines that
an output block is the new style rather than the traditional style.</p><p>Most of the parameters are shared by both styles. The following sections
document the traditional style of output block and any differences
between the two styles are described
<a href=#multiple_output_blocks>below</a> .</p><p>What the code should output and when it should output it is specified in
the &ldquo;output&rdquo; block of the input deck. An example output block is shown
below:</p><pre><code class=language-perl>begin:output
   # If use_offset_grid is true then the code dumps a grid which
   # displays positions relative to the left hand edge of the window
   use_offset_grid = F
   # number of timesteps between output dumps
   dt_snapshot = 1.0e-14
   # Number of dt_snapshot between full dumps
   full_dump_every = 10
   restart_dump_every = -1
   force_final_to_be_restartable = T

   # Properties at particle positions
   particles = never
   px = never
   py = never
   pz = never
   vx = never
   vy = never
   vz = never
   charge = never
   mass = never
   particle_weight = never

   # Properties on grid
   grid = always
   ex = always
   ey = always
   ez = always
   bx = always
   by = always
   bz = always
   jx = always
   jy = always
   ekbar = always + species
   mass_density = never + species
   charge_density = always
   number_density = always + species
   temperature = always + species

   distribution_functions = always
   particle_probes = never
end:output
</code></pre><p>There are three types of output dump in EPOCH which are used for
different purposes. These types are:</p><ul><li><code>normal</code> - The most frequent type of output dump in EPOCH is a normal
dump.</li><li><code>full</code> - A full dump is usually written every 10 or so normal dumps. A
full dump contains all the data that a normal dump contains and
should also contain any information which is needed only
infrequently, whether this is the full particle information or a
large distribution function. It is possible to turn off full dumps
completely.</li><li><code>restart</code> - A restart dump is a dump where the code guarantees to
write enough data to allow the code to restart from the output.
Output dumps are guaranteed to contain all the information in a
normal dump and, if they coincide with the timing for a full dump,
will also contain the full dump information.</li></ul><p>Information will never be written into a file twice, even if two
conditions for it being written are satisfied (i.e even if px should be
dumped both because it is a full dump and a restart dump, px will only
be written once).</p><p>Note that these dump levels only really make sense for the traditional
style of output block and are not really required when the new style is
used.</p><h1 id=dumpmask>Dumpmask</h1><p>When specifying which type of output dump to write a variable to there
are eight options which can be specified for each variable and can be
combined by addition. Some combinations make no sense but are formally
valid. The first four options specify at which output types the variable
is to be dumped:</p><ul><li><code>never</code> - If the variable is not a required restart
variable then it will never be written. If it is a required restart
variable then it will be written only at restart dumps.</li><li><code>full</code> - This variable will be written at full dumps only.</li><li><code>always</code> - This variable will be written at full, normal
and restart dumps.</li><li><code>restart</code> - This variable will be written at restart dumps
only. Note that variables required for restarting the code are always
written to restart dumps. This flag is to enable the writing of
additional variables into such dump files.
For grid variables derived from summing over particles (ie. &ldquo;ekbar&rdquo;,
&ldquo;mass_density&rdquo;, &ldquo;charge_density&rdquo;, &ldquo;number_density&rdquo;, &ldquo;temperature&rdquo;)
the following two parameters also apply.</li><li><code>species</code> - The derived variable should be output on a
species by species basis. It is combined with a dumpmask code by
addition as in:
<strong>charge_density = always + species</strong> .</li><li><code>no_sum</code> - The output for this derived variable should not
be summed over all species. By default, derived variables are summed
over all species. If you don&rsquo;t want to include this sum, you must use
the &ldquo;no_sum&rdquo; flag. It is combined with a dumpmask code by addition as
in:
<strong>charge_density = always + species + no_sum</strong> .
Most grid variables may be averaged over time. A more detailed
description of this is given in
<a href=#data_averaging>#Data
Averaging</a>. Data averaging is specified
using the following dumpmask parameters.</li><li><code>average</code> - The output for this variable should be averaged
over time. The time span over which the variable will be averaged is
controlled using flags described
<a href=#directives>below</a>.</li><li><code>snapshot</code> - By default, the &ldquo;average&rdquo; parameter replaces
the variable with an averaged version of the data. Adding this flag
specifies that the non-averaged variable should also be dumped to file.
When applied to a variable, these codes are referred to as a <em>dumpmask</em>.</li></ul><h1 id=directives>Directives</h1><p>The first set of options control the type and frequency of output dumps.
They are used as follows</p><ul><li><code>disabled</code> - Logical flag. If this is set to &ldquo;T&rdquo; then the
block is ignored and never generates any output. The default value is
&ldquo;F&rdquo;.</li><li><code>dt_snapshot</code> - Sets the interval between normal output
dumps in simulation seconds. Setting zero or negative means that the
code will not output based on this condition. The code does NOT
guarantee that outputs will be exactly <em>dt_snapshot</em> apart, what is
guaranteed is that the next output will be after the first iteration
which takes the simulation to a time $\ge$ <em>dt_snapshot</em> from the last
output. As with other variables which specify a unit of time, it can be
specified in more convenient unit by using a multiplication factor (see
<a href=/documentation/code_details/maths_parser/#constants>here</a>). For example,
&ldquo;dt_snapshot = 5 * femto&rdquo; will set it to be 5 femtoseconds. The
default value is a large number which will never trigger an output.</li><li><code>nstep_snapshot</code> - Sets the number of timesteps between
normal output dumps. Setting zero or negative means that the code will
not output based on this condition. If <em>dt_snapshot</em> is also specified
then both conditions are considered and output will be generated when
either condition is met. The default value is a large integer which will
never trigger an output.</li><li><code>full_dump_every</code> - The number of normal output dumps
between full output dumps. Setting to zero makes every dump a full dump.
Setting to a negative number stops the code from producing any full
dumps. This is the default.</li><li><code>restart_dump_every</code> - The number of normal output dumps
between restart dumps. Setting to zero makes every dump a restart dump.
Setting to a negative number stops the code from producing any restart
dumps. This is the default.</li><li><code>force_first_to_be_restartable</code> - Logical flag which
determines whether the file written at time zero is a restart dump. The
default value is &ldquo;F&rdquo;.</li><li><code>force_last_to_be_restartable</code> - Force the code to
override other output settings and make the last output dump it writes
be a restart dump. Any internal condition which causes the code to
terminate will make the code write a restart dump, but code crashes or
scheduler terminations will not cause the code to write a restart dump.
&ldquo;force_final_to_be_restartable&rdquo; is accepted as a synonym. The
default value is &ldquo;T&rdquo;.</li><li><code>dump_first</code> - Logical flag which determines whether to
write an output file immediately after initialising the simulation. The
default is &ldquo;T&rdquo;.</li><li><code>dump_last</code> - Logical flag which determines whether to
write an output file just before ending the simulation. The default is
&ldquo;T&rdquo; if an output block exists in the input deck and &ldquo;F&rdquo; otherwise.
&ldquo;dump_final&rdquo; is accepted as a synonym.</li><li><code>time_start</code> - Floating point parameter which specifies
the simulation time at which to start considering output for the block.
Note that if &ldquo;dump_first&rdquo; or &ldquo;dump_last&rdquo; are set to true for this
block then dumps will occur at the first or last timestep regardless of
the value of the <em>time_start</em> parameter. This also applies to the three
following parameters. The default value is 0.</li><li><code>time_stop</code> - Floating point parameter which specifies the
simulation time at which to stop considering output for the block. The
default value is the largest possible float.</li><li><code>nstep_start</code> - Integer parameter which specifies the step
number at which to start considering output for the block. The default
value is 0.</li><li><code>nstep_stop</code> - Integer parameter which specifies the step
number at which to stop considering output for the block. The default
value is the largest possible integer.</li><li><code>walltime_start</code> - Floating point parameter which specifies the elapsed walltime in
seconds at which to start considering output for the block. Note that if
<strong>dump_first</strong> or <strong>dump_last</strong> are set to true for this block then
dumps will occur at the first or last timestep regardless of the value
of the <strong>walltime_start</strong> parameter. The default value is 0.</li><li><code>walltime_stop</code> - Floating point parameter which specifies the elapsed walltime in
seconds at which to stop considering output for the block. The default
value is the largest possible float.</li><li><code>dump_cycle</code> - If this is set to a positive integer then
the output file number will be reset to zero after the specified cycle
number is reached. eg. if &ldquo;dump_cycle = 2&rdquo; then the sequence of output
dumps will be 0000.sdf, 0001.sdf, 0002.sdf, 0000.sdf, 0001.sdf, etc. The
default is 0, so dump cycling never occurs.</li><li><code>dump_cycle_first_index</code> - If this is set to a positive
integer then the value is used as the first index to use when cycling
output dumps due to the &ldquo;dump_cycle&rdquo; parameter. For example, if
&ldquo;dump_cycle = 2&rdquo; and &ldquo;dump_cycle_first_index = 1&rdquo; then the sequence
of output dumps will be 0000.sdf, 0001.sdf, 0002.sdf, 0001.sdf,
0002.sdf, 0001.sdf, etc. The default is 0.</li><li><code>dump_source_code</code> - EPOCH has the ability to write its
own source code into restart dumps. This is generated at compile time
and embedded into the binary and so is guaranteed to match that
corresponding to the running code. EPOCH comes with a script called
<em>unpack_source_from_restart</em> which can be used to unpack the source
code from a restart dump. To use this script, just type
<strong>unpack_source_from_restart &lt;sdf_filename></strong> at the command-line. If
this logical flag is set to false then the feature will be disabled. The
default value is &ldquo;T&rdquo;.</li><li><code>dump_input_decks</code> - If this logical flag is set to true
then a copy of the input decks for the currently running simulation is
written into the restart dumps. The default value is &ldquo;T&rdquo;.</li><li><code>dt_average</code> - When averaged variables are being output to
file, this parameter specifies the simulation time period over which
averaging is to occur. &ldquo;averaging_period&rdquo; is accepted as a synonym.</li><li><code>nstep_average</code> - When averaged variables are being output
to file, this parameter specifies the number of time steps over which
averaging is to occur. &ldquo;min_cycles_per_average&rdquo; is accepted as a
synonym. If both <em>dt_average</em> and <em>nstep_average</em> are specified, the
code will use the one which gives the longest simulation time-span.</li><li><code>use_offset_grid</code> - When using moving windows some
visualisation programs (notably VisIt) show the motion of the window by
moving the visualisation window rather than by changing the x-axis.
Setting this option to &ldquo;T&rdquo; causes the code to write another grid which
always gives the offset relative to the left hand edge of the window
rather than the true origin. Performs no function when not using the
moving window. The default value is &ldquo;F&rdquo;.</li><li><code>filesystem</code> - String parameter. Some filesystems can be
unreliable when performing parallel I/O. Often this is fixable by
prefixing the filename with &lsquo;ufs&rsquo; or &lsquo;nfs&rsquo;. This parameter supplies the
prefix to be used. The default value is an empty string.</li><li><code>file_prefix</code> - Although this parameter is supported by
the traditional style of output block, its primary purpose is for use
with multiple output blocks so it is documented in .
A few additional parameters have been added for use with the new style
of output block. These are documented
<a href=#multiple_output_blocks>below</a>.</li></ul><h1 id=particle_variables>Particle Variables</h1><p>The next set are per particle properties. If you wish to plot these
according to their spatial positions, you must include the
&ldquo;particle_grid&rdquo; in your output variables. All entries have a default
dumpmask of &ldquo;never&rdquo;.</p><ul><li><code>particle_grid</code> - Requests the output of particle
positions. This is a restart variable. No particle variables can be
plotted in VisIt unless this is dumped. If any particle variables are
written then the &ldquo;particle_grid&rdquo; is automatically written unless
&ldquo;particle_grid = never&rdquo; is specified. The synonym &ldquo;particles&rdquo; may also
be used.</li><li><code>px,py,pz</code> - The dumpmasks for the particle momenta.
Restart variable.</li><li><code>vx,vy,vz</code> - The dumpmasks for the particle velocities.</li><li><code>charge</code> - The dumpmask for the charge of a given particle.
This has no effect if the code is not compiled with the flag
&ldquo;-DPER_PARTICLE_CHARGE_MASS&rdquo; (see
<a href=/documentation/basic_usage/compiler_flags>here</a> ).</li><li><code>mass</code> - The dumpmask for the mass of a given particles.
This has no effect if the code is not compiled with the flag
&ldquo;-DPER_PARTICLE_CHARGE_MASS&rdquo; (see
<a href=/documentation/basic_usage/compiler_flags>here</a>). The synonym
&ldquo;rest_mass&rdquo; may also be used.</li><li><code>particle_weight</code> - The dumpmask for the weighting
function which describes how many real particles each pseudoparticle
represents. Restart variable. The synonym &ldquo;weight&rdquo; may also be used.</li><li><code>ejected_particles</code> - If requested then all the particles
which have left the simulation domain since the last output dump of this
type are included in the output. The list of ejected particles is
treated as if it were a separate species and the particle variables
which get written are requested using the other particle variable flags
(ie. &ldquo;particle_grid&rdquo;, etc). Once the data has been written, the ejected
particle lists are reset and will accumulate particles until the next
requested output dump.</li><li><code>particle_energy</code> - The dumpmask for per-particle kinetic
energy.</li><li><code>relativistic_mass</code> - The dumpmask for per-particle
relativistic mass (ie. not rest mass).</li><li><code>gamma</code> - The dumpmask for per-particle relativistic gamma
(ie. $[1-(v/c)^2]^{-1/2}$).</li><li><code>optical_depth</code> - The dumpmask for per-particle optical
depth. Restart variable. This option is only supplied for debugging
purposes and should not be required by most users.</li><li><code>trident_optical_depth</code> - The dumpmask for per-particle
optical depth used by the Trident model. Restart variable. This option
is only supplied for debugging purposes and should not be required by
most users.</li><li><code>qed_energy</code> - The dumpmask for per-particle QED-related
particle energy. Restart variable. This option is only supplied for
debugging purposes and should not be required by most users.</li><li><code>work_{x,y,z}</code> - The dumpmask for the work exerted by the fields on each particle
during the last time step. The work is divided into its three spatial
components. The output is in numbers of $mc^2$ corresponding to the
particle&rsquo;s $\gamma$-factor. Requires compiler flag
&ldquo;WORK_DONE_INTEGRATED&rdquo;.</li><li><code>work_{x,y,z}_total</code> - Same as above, but the work is integrated over the entire simulation
duration. The sum of all three components equals the particle&rsquo;s
$\gamma$-factor. Requires compiler flag &ldquo;WORK_DONE_INTEGRATED&rdquo;.</li><li><code>id</code> - Global particle ID. See below for details.
Particle IDs are useful if you want to track the progress of each
particle throughout the simulation. Since they increase the size of each
particle data structure, they are disabled by default and must be
enabled using a compiler flag. The &ldquo;PARTICLE_ID&rdquo; flag will use an
8-byte integer to represent the ID and &ldquo;PARTICLE_ID4&rdquo; uses a 4-byte
integer. They are written to file using the &ldquo;id&rdquo; flag.</li></ul><p>Note: In the current implementation, the particle IDs are passed between
processors and written to file using REAL numbers. This means that in
double precision the maximum particle ID is $2^{53} \sim 10^{16}$. This
should be ample for the foreseeable future. However, if the code is
compiled for single precision then the maximum ID is
$2^{24} = 16777216$. Probably not big enough.</p><h1 id=grid_variables>Grid Variables</h1><p>The next set of parameters specify properties which are defined on a
regular cartesian mesh. All entries have a default dumpmask of &ldquo;never&rdquo;.</p><ul><li><code>grid</code> - The dumpmask for the Cartesian grid which defines
the locations of the grid variables. No grid variables can be plotted in
VisIt unless this variable is output. If any grid variables are written
then the &ldquo;grid&rdquo; is automatically written unless &ldquo;grid = never&rdquo; is
specified. The synonym &ldquo;field_grid&rdquo; may also be used.</li><li><code>ex,ey,ez</code> - The electric field vectors pointing in all
three directions. Restart variables.</li><li><code>bx,by,bz</code> - The magnetic field vectors pointing in all
three directions. Restart variables. In 1D bx is a trivial variable
because of the Solenoidal condition. It is included simply for symmetry
with higher dimension codes.</li><li><code>jx,jy,jz</code> - The current densities pointing in all three
directions. Restart variables. Can have species dumpmask.</li></ul><h1 id=derived_variables>Derived Variables</h1><p>The final set of parameters specify properties which are not variables
used in the code but are derived from them. The first six variables are
derived by summing properties of all the particles in each grid cell.
The resulting quantities are defined on the regular cartesian mesh used
for grid variables. All entries have a default dumpmask of &ldquo;never&rdquo;.</p><ul><li><code>ekbar</code> - Mean kinetic energy on grid in $J$. Can have
species dumpmask.</li><li><code>ekflux</code> - Mean kinetic energy flux in each direction on
the grid in $W/m^2$. Can have species dumpmask.</li><li><code>mass_density</code> - Mass density on grid in $kg/m^3$. Can
have species dumpmask.</li><li><code>charge_density</code> - Charge density on grid in $C/m^3$. Can
have species dumpmask.</li><li><code>number_density</code> - Number density on grid in $m^{-3}$. Can
have species dumpmask.</li><li><code>particles per cell</code> - Number of particles per cell. Can
have species dumpmask. The synonym &ldquo;ppc&rdquo; may also be used.</li><li><code>average weight</code> - Average of weight of the particles in
each cell. Can have species dumpmask.</li><li><code>average_p{x,y,z}</code> - Average momentum in each direction of the particles in each cell. Can have species dumpmask.</li><li><code>temperature</code> - Isotropic temperature on grid in $K$.
Calculated from standard deviation of particle momenta, so in general
matches mean kinetic energy only for isotropic plasma with no net drift.
The synonym &ldquo;temp&rdquo; may also be used. Can have species dump mask.</li><li><code>temperature_{x,y,z}</code> - The temperature in each of the {x,y,z} directions, respectively, in
$K$. The synonyms &ldquo;temp_{x,y,z}&rdquo; and &ldquo;t{x,y,z}&rdquo; may also be used.
Can have species dumpmask.</li><li><code>poynt_flux</code> - Poynting flux in each direction in $W/m^2$.</li></ul><h1 id=other_variables>Other Variables</h1><ul><li><code>distribution_functions</code> - Dumpmask for outputting
distribution functions specified in the input deck. Each individual
distribution function can have its own dumpmask and these will be
applied after the value of &ldquo;distribution_functions&rdquo; has been
considered. For example, if the output block contains
&ldquo;distribution_functions = full&rdquo; and the dist_fn block (see
<a href=/documentation/input_deck/input_deck_dist_fn>here</a>)
contains &ldquo;dumpmask = always&rdquo; then the distribution function will
only be output at full dumps.</li><li><code>particle_probes</code> - Dumpmask for outputting particle
probes specified in the input deck. Each individual particle probe
can have its own dumpmask and these will be applied after the value
of &ldquo;particle_probes&rdquo; has been considered. For example, if the
output block contains &ldquo;particle_probes = always&rdquo; and the dist_fn
block contains &ldquo;dumpmask = full&rdquo; then the particle probe will only
be output at full dumps.</li><li><code>absorption</code> - This is a two-valued output variable. It
accepts a dumpmask in the same manner as other output variables.
When selected, two numbers will be calculated and written to file:</li></ul><ol><li>&ldquo;Absorption/Laser_enTotal&rdquo; - The total amount of energy injected
into the simulation by laser boundaries.</li><li>&ldquo;Absorption/Abs_frac&rdquo; - The fraction of the total laser energy
being absorbed by the open boundaries.</li></ol><ul><li><code>total_energy_sum</code> - This is also a two-valued output
variable. It accepts a dumpmask in the same manner as other output
variables. When selected, the following two numbers will be
calculated and written to file:</li></ul><ol><li>&ldquo;Total Particle Energy in Simulation (J)&rdquo;</li><li>&ldquo;Total Field Energy in Simulation (J)&rdquo;</li></ol><h1 id=data_averaging>Data Averaging</h1><p>EPOCH can accumulate an average value for field variables to be written
to output dumps. These may be requested by using the &ldquo;average&rdquo; keyword
when specifying a dump variable. The non-averaged variable will still be
written to restart dumps where required for restarting the code but not
full or normal dumps. If you also want the non-averaged variable to be
written then you can add the &ldquo;snapshot&rdquo; option.</p><p>The period of time over which averaging occurs can be specified using
the &ldquo;dt_average&rdquo; keyword. Alternatively, you may specify the number of
cycles over which to perform the averaging using the &ldquo;nstep_average&rdquo;
keyword. If both &ldquo;dt_average&rdquo; and &ldquo;nstep_average&rdquo; are specified then
the averaging will be performed over the longest of the two intervals.</p><p>Note that previous versions of the code would alter the time step to
ensure that there were enough cycles between output dumps to satisfy the
&ldquo;nstep_average&rdquo; parameter. However, since it affects the accuracy of
the result, this is no longer the case and only a warning message is
issued.</p><p>The following shows an example use of averaging in the output block.</p><pre><code class=language-perl>begin:output
   dt_snapshot = 1.0e-15
   full_dump_every = 10
   dt_average = 1.0e-17

   charge_density = always + average + snapshot
   mass_density = full + average + snapshot
   ekbar = full + average
end:output
</code></pre><p>With this configuration, &ldquo;charge_density&rdquo; will be written in both
normal and averaged form at normal, full and restart dumps.
&ldquo;mass_density&rdquo; will be written in both forms at full dumps. Only the
average value of &ldquo;ekbar&rdquo; will be written at full dumps.</p><p>Only field and derived variables can be averaged currently in EPOCH.
Particle properties, distribution functions and particle probes cannot
currently be averaged.</p><h1 id=single_precision_output>Single-precision output</h1><p>By default, EPOCH is compiled and run using double precision arithmetic.
This is the only method which has been fully tested and the method that
we recommend to other users of the code. However, this also means that
data files can get very large.</p><p>To avoid this problem, it is possible to run the code in double
precision but convert the data to single precision when writing to disk.
This is done by adding the &ldquo;single&rdquo; field the the dumpmask of an output
variable. It can be specified on a per-variable basis.</p><pre><code class=language-perl>begin:output
   dt_snapshot = 8 * femto

   grid = always
   ex = always
   ey = always + single
end:output
</code></pre><p>In this example, the grid variable &ldquo;ex&rdquo; will be written as a double
precision array and &ldquo;ey&rdquo; will be converted to single precision.</p><p>Dumping variable averages adds an extra field variable for each average
requested. These take up memory during runtime but do not influence the
simulation behaviour in any way. For this reason, if the average is to
be written out in single precision then it may as well be stored in a
single precision variable. This behaviour can be requested using the
&ldquo;average_single&rdquo; dumpmask flag.</p><h1 id=multiple_output_blocks>Multiple output blocks</h1><p>In more recent versions of EPOCH, it is now possible to have multiple
&ldquo;output&rdquo; blocks in the input deck, each with their own &ldquo;dt_snapshot&rdquo; or
&ldquo;nstep_snapshot&rdquo; and their own set of output variables.</p><p>The syntax remains the same as the original &ldquo;output&rdquo; block syntax with
the addition of &ldquo;name&rdquo; and &ldquo;restartable&rdquo; fields.</p><p>The &ldquo;name&rdquo; field specifies the file name to use for the output list.
Each time EPOCH generates an output dump, it writes an entry into the
file &ldquo;<code>&lt;name>.visit</code>&rdquo;. This can be used to find all the output dumps of
a specific output block. It is named with a &ldquo;.visit&rdquo; suffix to enable
its use as a file grouping list in the VisIt data analysis tool, but it
is just a plain text file so it can equally be used by any other
program.</p><p>If two output blocks are written at the same time, the output will be
combined into a single file.</p><p>The &ldquo;restartable&rdquo; field specifies that the output block should generate
output dumps containing all the information necessary to restart a
simulation.</p><p>The following parameters are supported by the new style of output block
in addition to those for the traditional style:</p><ul><li><code>name</code> - Identifies the output block with a name which is
required when multiple output blocks are used.</li><li><code>restartable</code> - Specifies whether or not the output for
this block is a restartable dump.</li><li><code>dump_at_times</code> - Floating point parameter which
specifies a set of simulation times at which to write the current
output block. This can only be used with named output blocks. The
values are given as a comma separated list. eg. &ldquo;dump_at_times =
0, 0.15, 1.1&rdquo;. The name &ldquo;times_dump&rdquo; is accepted as a synonym. By
default the list is empty.</li><li><code>dump_at_nsteps</code> - Integer parameter which specifies a
set of step numbers at which to write the current output block. This
can only be used with named output blocks. The values are given as a
comma separated list. eg. &ldquo;dump_at_nsteps = 5, 11, 15&rdquo;. The name
&ldquo;nsteps_dump&rdquo; is accepted as a synonym. By default the list is
empty.</li><li><code>dump_at_walltimes</code> - Floating point parameter which specifies a set of elapsed walltimes
at which to write the current output block. This can only be used with
named output blocks. The values are given as a comma separated list. eg.
&ldquo;dump_at_walltimes = 10, 100.1, 250.5&rdquo;. These times are the total
elapsed time in seconds since the start of the simulation. Note that if
the simulation has been restarted then the total elapsed time will
include the accumulated walltime of all previous runs that were used to
produce the restart dump. The name <strong>walltimes_dump</strong> is accepted as a
synonym. By default the list is empty.</li><li><code>walltime_interval</code> - Floating point parameter which specifies the interval between output
dumps in elapsed walltime seconds. Setting zero or negative means that
the code will not output based on this condition. The default value is -1.0.</li><li><code>file_prefix</code> - String parameter. It is sometimes useful
to distinguish between dumps generated by the different output blocks.
This parameter allows the user to supply a file prefix to be prepended
to all dumps generated by the current output block. See below for
further details. The default value is an empty string.</li><li><code>rolling_restart</code> - Logical flag. If set to &ldquo;T&rdquo;, this sets
the parameters required for performing rolling restarts on the current
block. It is a shorthand for setting the following flags: &ldquo;dump_cycle =
1&rdquo;, &ldquo;restartable = T&rdquo; and &ldquo;file_prefix = roll&rdquo;. With rolling restarts
enabled the first file will be named &ldquo;roll0000.sdf&rdquo; and the second will
be &ldquo;roll0001.sdf&rdquo;. The third dump will again be named &ldquo;roll0000.sdf&rdquo;,
overwriting the first one. In this way, restart dumps can be generated
throughout the duration of the simulation whilst limiting the amount of
disk space used.</li></ul><p>The following parameters cannot be used in conjunction with the new
style of output block:</p><ul><li><code>full_dump_every</code></li><li><code>restart_dump_every</code></li><li><code>force_first_to_be_restartable</code></li><li><code>force_last_to_be_restartable</code></li><li><code>use_offset_grid</code></li></ul><p>The &ldquo;file_prefix&rdquo; parameter warrants some further discussion. This
parameter prepends the given prefix to all files generated by the output
block in which it is specified. For example, if &ldquo;file_prefix = aa&rdquo; is
set then files generated by the output block will be named &ldquo;aa0000.sdf&rdquo;,
etc. instead of just &ldquo;0000.sdf&rdquo;.</p><p>This also allows different variables to different files at the same time
step. For example, here are two output blocks which do not use file
prefixes:</p><pre><code class=language-perl>begin:output
   name = o1
   nstep_snapshot = 1
   charge_density = always
end:output

begin:output
   name = o2
   dump_at_nsteps = 10
   restartable = T
end:output
</code></pre><p>With this input deck, we want to have the &ldquo;charge_density&rdquo; derived
variable at every snapshot and then periodically write a restart dump.
The problem is that the dump file &ldquo;0010.sdf&rdquo; contains both the restart
information and the &ldquo;charge_density&rdquo; variable. At the end of the run we
can&rsquo;t just delete the large restart dumps without losing the smaller
variables at that time step.</p><p>With the new version we would add a prefix to one or both blocks:</p><pre><code class=language-perl>begin:output
   name = o1
   file_prefix = small
   nstep_snapshot = 1
   charge_density = always
end:output

begin:output
   name = o2
   nstep_snapshot = 10
   restartable = T
end:output
</code></pre><p>Now the &ldquo;charge_density&rdquo; will be written to &ldquo;small0000.sdf&rdquo;, etc. At
step 10, two files will be written: &ldquo;small0010.sdf&rdquo; containing just the
charge_density and &ldquo;0000.sdf&rdquo; containing all the restart variables.</p><p>Note that some care must be taken, since if the same variable is in the
output block for multiple file prefixes then multiple copies will be
written to file. This obviously uses more disk space and is more time
consuming than necessary.</p><p>It should also be noted that if multiple output blocks use the same file
stem then their output will be combined. eg:</p><pre><code class=language-perl>begin:output
   name = o1
   file_prefix = a
   dump_at_nsteps = 2,4
   ex = always
end:output

begin:output
   name = o2
   file_prefix = a
   dump_at_nsteps = 3,4
   ey = always
end:output

begin:output
   name = o3
   file_prefix = b
   dump_at_nsteps = 4
   ez = always
end:output
</code></pre><p>In this example, at step 2 a0000.sdf contains ex, step 3 a0001.sdf
contains ey, step 4 a0002.sdf contains ex, ey and b0000.sdf contains ez.</p></div><div class=article-widget><div class=post-nav><div class=post-nav-item><div class=meta-nav>Previous</div><a href=/documentation/input_deck/input_deck_window.html rel=next>window block</a></div><div class=post-nav-item><div class=meta-nav>Next</div><a href=/documentation/input_deck/input_deck_output_global.html rel=prev>output_global block</a></div></div></div></div><div class=body-footer><p>Last updated on Jun 23, 2021</p></div></article><footer class=site-footer><p class=powered-by>Powered by the
<a href=https://sourcethemes.com/academic/ target=_blank rel=noopener>Academic theme</a> for
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a>.</p></footer></main></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin=anonymous></script><script>const code_highlighting=!0</script><script>const isSiteThemeDark=!1</script><script>const search_config={indexURI:"/index.json",minLength:1,threshold:.3},i18n={no_results:"No results found",placeholder:"Search...",results:"results found"},content_type={post:"Posts",project:"Projects",publication:"Publications",talk:"Talks"}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin=anonymous></script><script>anchors.add()</script><script id=search-hit-fuse-template type=text/x-template>
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=/js/academic.min.6f1005d1a84220e2f466ff3d8e712f31.js></script><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i> Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i> Download</a><div id=modal-error></div></div></div></div></div></body></html>